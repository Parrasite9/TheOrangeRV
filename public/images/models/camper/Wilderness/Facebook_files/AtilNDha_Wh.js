;/*FB_PKG_DELIM*/

__d("EncryptedBackupsSymmetricEncryptionUtils",[],(function(a,b,c,d,e,f){"use strict";a=16;b=28;c=16;d=128;f.hChaCha20SubKeyNonceLengthInBytes=a;f.totalNonceLengthInBytes=b;f.aesGcmTagLengthInBytes=c;f.aesGcmTagLength=d}),66);
__d("HChaCha20",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.fromHexString=function(a){var b=a.match(/[A-Fa-f0-9]{1,2}/g);if(a.length===0||a.length%2!==0||b==null)throw c("err")('The string "'+a+'" is not valid hex.');return new Uint8Array(b.map(function(a){return parseInt(a,16)}))};a.bufferToUint32Array=function(a){var b=new DataView(a),c=[];a=a.byteLength/4;for(var d=0;d<a;d++)c.push(new DataView(b.buffer.slice(d*4,d*4+4)).getInt32(0));return Uint32Array.from(c)};a.rotate=function(a,b){a=a&4294967295;b=b&31;return(a<<b|a>>>32-b)>>>0};a.quarterRound=function(b,c,d,e){b=b;c=c;d=d;e=e;b=b+c&4294967295;e=a.rotate(e^b,16);d=d+e&4294967295;c=a.rotate(c^d,12);b=b+c&4294967295;e=a.rotate(e^b,8);d=d+e&4294967295;c=a.rotate(c^d,7);return[b>>>0,c>>>0,d>>>0,e>>>0]};var b=a.prototype;b.createHCtx=function(b,d){var e=new Uint32Array(16),f=a.fromHexString("657870616e642033322d62797465206b");if(f.byteLength!==16)throw c("err")("Could not create context. Invalid constant buffer length of "+f.byteLength+". Expected a length of 16");else if(b.byteLength!==32)throw c("err")("Could not create context. Invalid key buffer length of "+b.byteLength+". Expected a length of 32");else if(d.byteLength!==16)throw c("err")("Could not create context. Invalid nonce buffer length of "+d.byteLength+". Expected a length of 16");f=a.bufferToUint32Array(f.buffer);b=a.bufferToUint32Array(b);d=a.bufferToUint32Array(d);e.set(f);e.set(b,f.length);e.set(d,f.length+b.length);return e.buffer};b.hChaCha20Bytes=function(b,c){c=new DataView(this.createHCtx(c,b));b=c.getInt32(0);var d=c.getInt32(1<<2),e=c.getInt32(2<<2),f=c.getInt32(3<<2),g=c.getInt32(4<<2),h=c.getInt32(5<<2),i=c.getInt32(6<<2),j=c.getInt32(7<<2),k=c.getInt32(8<<2),l=c.getInt32(9<<2),m=c.getInt32(10<<2),n=c.getInt32(11<<2),o=c.getInt32(12<<2),p=c.getInt32(13<<2),q=c.getInt32(14<<2);c=c.getInt32(15<<2);for(var r=0;r<10;r++){var s=a.quarterRound(b,g,k,o);b=s[0];g=s[1];k=s[2];o=s[3];s=a.quarterRound(d,h,l,p);d=s[0];h=s[1];l=s[2];p=s[3];s=a.quarterRound(e,i,m,q);e=s[0];i=s[1];m=s[2];q=s[3];s=a.quarterRound(f,j,n,c);f=s[0];j=s[1];n=s[2];c=s[3];s=a.quarterRound(b,h,m,c);b=s[0];h=s[1];m=s[2];c=s[3];s=a.quarterRound(d,i,n,o);d=s[0];i=s[1];n=s[2];o=s[3];s=a.quarterRound(e,j,k,p);e=s[0];j=s[1];k=s[2];p=s[3];s=a.quarterRound(f,g,l,q);f=s[0];g=s[1];l=s[2];q=s[3]}return Uint32Array.from([b,d,e,f,o,p,q,c]).buffer};return a}();g.HChaCha20=a}),98);
__d("LSClearLoadingFlagsForThreadRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return a[1]?b.forEach(b.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingAfter:!1})}):b.sequence([function(d){return b.i64.eq(b.i64.cast([0,0]),a[0])?b.sequence([function(c){return b.forEach(b.db.table(198).fetch([[[a[2]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:!1})})},function(a){return c[8]=b.i64.cast([0,0]),c[9]=void 0,c[10]=!1,c[11]=!1,b.forEach(b.db.table(198).fetch(),function(a){a=a.item;return c[12]=a.minLastActivityTimestampMs,c[14]=a.minThreadKey,c[13]=b.i64.lt(c[8]==null?c[12]:c[8],c[12]),c[8]=c[13]?c[12]:c[8],c[9]=c[13]?c[14]:c[9],c[10]=c[10]||a.isLoadingBefore,c[11]=c[11]||b.i64.gt(c[12],b.i64.cast([0,1]))&&b.i64.gt(c[14],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[8],c[9],c[10],c[11]],c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],a}]):b.resolve((d=[b.i64.cast([0,0]),void 0,!1,!1],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],d))},function(c){return b.forEach(b.db.table(220).fetch([[[a[2],a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:!1})})},function(d){return c[4]=c[0],c[5]=c[1],c[6]=c[2],c[7]=c[3],b.forEach(b.filter(b.db.table(220).fetch(),function(c){return b.i64.eq(c.parentThreadKey,a[0])}),function(a){a=a.item;return c[8]=a.minLastActivityTimestampMs,c[10]=a.minThreadKey,c[9]=b.i64.lt(c[4]==null?c[8]:c[4],c[8]),c[4]=c[9]?c[8]:c[4],c[5]=c[9]?c[10]:c[5],c[6]=c[6]||a.isLoadingBefore,c[7]=c[7]||b.i64.gt(c[8],b.i64.cast([0,1]))&&b.i64.gt(c[10],b.i64.cast([-2147483648,0]))})},function(d){return b.forEach(b.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:c[6]})})}])},function(a){return b.resolve(d)}])}e.exports=a}),null);
__d("LSMaxInt32",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_int32(2147483647);g["default"]=a}),98);
__d("RetUtil",["LSResult"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("LSResult")(a)}g.getNullableRetResult=a}),98);
__d("LSCreateDerivedKeys.nop",["CryptoLogger","I64","LSMaxInt32","LSVec","Promise","RetUtil","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i;a=function(a,e,f,g,j,k){var l=d("CryptoLogger").CryptoLogger("create_derived_keys");a=c("LSVec").toArray(k);if(a.length<1||a.some(function(a){return(i||(i=d("I64"))).gt(a,c("LSMaxInt32"))})){l.mustfix("Invalid key lengths for derive keys");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult(void 0))}var m=a.map((i||(i=d("I64"))).to_int32),n=a.map(i.to_int32).reduce(function(a,b){return a+b},0)*8;return d("XPlatReactCrypto").subtleImportKey("raw",j,"HKDF",!1,["deriveBits"]).then(function(a){var b;return d("XPlatReactCrypto").subtleDeriveBits({hash:"SHA-256",info:f,name:"HKDF",salt:(b=g)!=null?b:new Uint8Array(10).buffer},a,n)}).then(function(a){a=new Uint8Array(a);var b=[],e=0;for(var f=0,g=m.length;f<g;++f){var h=e+m[f];b.push(a.slice(e,h).buffer);e=h}return d("RetUtil").getNullableRetResult(c("LSVec").ofArray(b))})["catch"](function(a){l.catching(a).mustfix("Failed to create derived keys");return d("RetUtil").getNullableRetResult()})};g["default"]=a}),98);
__d("LSDeleteBackupOnClient",["LSAppendDataTraceAddon","LSFlushDataTrace.nop","LSIsMobileClient","LSLogMebClientEvent.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] Beginning execution."),d[1]="Beginning deleteBackupOnClient stored procedure",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[1]].join("")),d[2]=c.createArray(),void 0!==void 0?d[11]=(d[2].push(void 0),d[2]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[1]].join(""),d[2],c.i64.cast([0,4]))},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1423]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[3]=a[0],a})},function(a){return d[3]?d[4]=!0:d[4]=!1,d[4]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[11]=c.createArray(),void 0!==void 0?d[12]=(d[11].push(void 0),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[11],c.i64.cast([0,3]))):c.resolve()},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(168).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(168).fetch(),function(a){return a["delete"]()})},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(169).fetch([[[a[0]]],"fk_secure_encrypted_backups_client_state"]),function(a){return a["delete"]()}):c.forEach(c.db.table(169).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(190).fetch(),function(a){return a["delete"]()})},function(a){return c.forEach(c.db.table(174).fetch(),function(a){return a["delete"]()})},function(b){return a[1]==="fetch_virtual_device"?c.db.table(178).put({pk:c.i64.cast([0,1]),recoveryCodeStatus:c.i64.cast([0,4])}):c.resolve()},function(e){return a[2]?c.sequence([function(a){return d[11]="Clearing backups tables",function(a){c.logger(a).info(a)}(["[EncryptedBackups][deleteBackupOnClient] ","",d[11]].join("")),d[12]=c.createArray(),void 0!==void 0?d[19]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"deleteBackupOnClient",[d[11]].join(""),d[12],c.i64.cast([0,4]))},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1891]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(a){return c.forEach(c.db.table(172).fetch([[[c.i64.cast([0,1])]]]),function(a){var b=a.update;a.item;return b({backupId:void 0})})},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1892]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.filter(c.db.table(184).fetch(),function(b){return c.i64.eq(b.backupId,a[0])}),function(a){return a["delete"]()}):c.forEach(c.db.table(184).fetch(),function(a){return a["delete"]()})},function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,1893]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[17]=a[0],a})},function(a){return d[17]?d[18]=!0:d[18]=!1,d[18]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[19]=c.createArray(),void 0!==void 0?d[20]=(d[19].push(void 0),d[19]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[19],c.i64.cast([0,3]))):c.resolve()},function(b){return c.i64.neq(a[0],void 0)?c.forEach(c.db.table(196).fetch([[[a[0]]]]),function(a){return a["delete"]()}):c.forEach(c.db.table(196).fetch(),function(a){return a["delete"]()})}]):c.resolve()},function(e){return a[5]?c.sequence([function(e){return a[5]?c.sequence([function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,84]),c.i64.cast([0,2]),void 0,void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):a[3]!==void 0?c.sequence([function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,85]),c.i64.cast([0,2]),"The flow did not succeed",void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[3]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]?d[12]=!0:d[12]=!1,d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[13],c.i64.cast([0,3]))):c.resolve()}]):a[4]!==void 0?c.sequence([function(e){return d[14]=["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",a[4]].join(""),function(a){c.logger(a).mustfix(a)}(d[14]),d[11]=c.createArray(),a[3]!==void 0?d[15]=(d[11].push(a[3]),d[11]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",a[4],d[11],c.i64.cast([0,3]))},function(e){return a[3]!==void 0?c.sequence([function(e){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,85]),c.i64.cast([0,2]),d[14],void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return d[15]?d[16]=!0:d[16]=!1,d[16]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[17]=c.createArray(),void 0!==void 0?d[18]=(d[17].push(void 0),d[17]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[17],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[3]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[12]=a[0],a})},function(a){return d[12]?d[13]=!0:d[13]=!1,d[13]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):c.sequence([function(e){return a[3]!==void 0?c.sequence([function(d){return a[3]!==void 0?c.storedProcedure(b("LSAppendDataTraceAddon"),a[3],c.i64.cast([0,85]),c.i64.cast([0,2]),["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ","",""].join(""),void 0):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[13]=a[0],a})},function(a){return d[13]?d[14]=!0:d[14]=!1,d[14]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[15]=c.createArray(),void 0!==void 0?d[16]=(d[15].push(void 0),d[15]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[15],c.i64.cast([0,3]))):c.resolve()}]):c.resolve()},function(d){return a[3]!==void 0?c.nativeOperation(b("LSFlushDataTrace.nop"),a[3]):c.resolve()},function(a){return c.storedProcedure(b("LSIsMobileClient")).then(function(a){return a=a,d[11]=a[0],a})},function(a){return d[11]?d[12]=!0:d[12]=!1,d[12]?(function(a){c.logger(a).mustfix(a)}("[EncryptedBackups][MEBTraceUtils] LSDataTraceMciTraceLog native op not supported"),d[13]=c.createArray(),void 0!==void 0?d[14]=(d[13].push(void 0),d[13]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"MEBTraceUtils","LSDataTraceMciTraceLog native op not supported",d[13],c.i64.cast([0,3]))):c.resolve()}])},function(a){return d[5]=c.i64.of_float(Date.now()),d[6]=c.i64.random(),d[8]="Finishing execution. Execution time: ",d[9]=c.i64.to_string(c.i64.sub(d[5],d[0])),d[10]=" ms",d[7]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsDeleteBackupOnClientStoredProcedure] ",d[7],d[8],d[7],d[9],d[7],d[10]].join("")),c.i64.eq(c.i64.mod_(d[6],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[11]=",",d[12]=c.createArray(),void 0!==void 0?d[13]=(d[12].push(void 0),d[12]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsDeleteBackupOnClientStoredProcedure",[d[8],d[11],d[9],d[11],d[10]].join(""),d[12],c.i64.cast([0,4]))):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSPlatformArmadilloUtils",["MAWMICSafe","Promise","cr:6998","cr:7349","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h=b("cr:6998"))!=null?h:b("cr:7349"),k=[];function a(a){k.push(a)}function e(){j==null?void 0:j.completeSync();if(k.length===0){j==null?void 0:j.maybeEndOccamadilloThreadMapping();return}c("promiseDone")((i||(i=b("Promise"))).allSettled(k.map(function(a){return a()})),function(){return j==null?void 0:j.maybeEndOccamadilloThreadMapping()})}function f(){d("MAWMICSafe").markEvent("ls_init_end")}function l(a){d("MAWMICSafe").fail("init_sync_failure",a)}g.executeOnThreadMappingEnd=a;g.occamadilloInitEnd=e;g.reportInitEnd=f;g.reportInitSyncFailure=l}),98);
__d("SymmetricEncryptionPaddingUtils",["XPlatReactTextEncoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(a<10)return 10-a;var b=Math.floor(Math.log2(a)),c=Math.floor(Math.log2(b))+1;b=b-c;c=(1<<b)-1;b=a+c&(c^-1);return b-a}function i(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=a.byteLength,d=h(c);d=b+c+d;d=new DataView(new ArrayBuffer(d));d.setUint32(0,c);c=new Uint8Array(d.buffer);c.set(new Uint8Array(a),b);return c.buffer}function a(a){var b=new(d("XPlatReactTextEncoder").TextEncoder)();b=b.encode(a).buffer;return i(b)}function b(a){var b=Uint32Array.BYTES_PER_ELEMENT,c=new DataView(a);if(c.byteLength<b)return;var d=a.byteLength;c=c.getUint32(0);d=d-b;if(c>=0&&c<=d)return a.slice(b,b+c)}g.getPaddingLength=h;g.padData=i;g.pad=a;g.stripPadding=b}),98);
__d("LSSymmetricEncryptionCreateDecryptedData.nop",["CryptoLogger","EncryptedBackupsSymmetricEncryptionUtils","HChaCha20","Promise","RetUtil","SymmetricEncryptionPaddingUtils","XPlatReactCrypto"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_data");a=function(a,c,e,f,g){if(g.byteLength<d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes+d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLengthInBytes){i.mustfix("cipher text is invalid");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())}a=new Uint8Array(g);var j=a.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes);c=new(d("HChaCha20").HChaCha20)();var k=a.slice(d("EncryptedBackupsSymmetricEncryptionUtils").totalNonceLengthInBytes).buffer;g=c.hChaCha20Bytes(j.slice(0,d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer,e);return d("XPlatReactCrypto").subtleImportKey("raw",g,"AES-GCM",!1,["decrypt"]).then(function(a){return d("XPlatReactCrypto").subtleDecrypt({additionalData:f,iv:new Uint8Array(j.slice(d("EncryptedBackupsSymmetricEncryptionUtils").hChaCha20SubKeyNonceLengthInBytes).buffer),name:"AES-GCM",tagLength:d("EncryptedBackupsSymmetricEncryptionUtils").aesGcmTagLength},a,k)}).then(function(a){a=d("SymmetricEncryptionPaddingUtils").stripPadding(a);a==null&&i.mustfix("Failed to strip padding for symmetric decryption");return d("RetUtil").getNullableRetResult(a)})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric data decryption failed");return(h||(h=b("Promise"))).resolve(d("RetUtil").getNullableRetResult())})};g["default"]=a}),98);
__d("LSSymmetricEncryptionCreateDecryptedString.nop",["Base64Utils","CryptoLogger","LSResult","LSSymmetricEncryptionCreateDecryptedData.nop","XPlatReactTextDecoder"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return c("LSResult")(a)}a=function(a,b,e,f,g){var i=d("CryptoLogger").CryptoLogger("symmetric_encryption_create_decrypted_string");g=d("Base64Utils").toArrayBuffer(g);return c("LSSymmetricEncryptionCreateDecryptedData.nop")(a,b,e,f,g).then(function(a){a=a[0];return a}).then(function(a){return a==null?h():h(new(d("XPlatReactTextDecoder").TextDecoder)().decode(a))})["catch"](function(a){d("CryptoLogger").captureError(i,a).mustfix("symmetric string decryption failed");return h()})};g["default"]=a}),98);
__d("LSUpsertInboxThreadsRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(198).put({syncGroup:a[0],minLastActivityTimestampMs:a[1],hasMoreBefore:a[2],isLoadingBefore:a[3],minThreadKey:a[4]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSUpsertSyncGroupThreadsRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(220).put({syncGroup:a[0],parentThreadKey:a[1],minLastActivityTimestampMs:a[2],hasMoreBefore:a[3],isLoadingBefore:a[4],minThreadKey:a[5]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSThreadsRangesQuery",["LSClearLoadingFlagsForThreadRange","LSGetCursor","LSIssueNewTaskAndGetTaskID","LSUpsertInboxThreadsRange","LSUpsertSyncGroupThreadsRange"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return a[1]&&c.i64.eq(a[6],c.i64.cast([0,0]))?c.storedProcedure(b("LSClearLoadingFlagsForThreadRange"),a[0],!1,c.i64.cast([0,1])):(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)||a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))&&!(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)&&a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))?c.sequence([function(e){return d[16]=a[3]==null?c.i64.cast([-2147483648,0]):a[3],d[15]=a[6]==null?c.i64.cast([0,1]):a[6],d[17]=c.i64.gt(d[15],c.i64.cast([0,1]))&&c.i64.gt(d[16],c.i64.cast([-2147483648,0])),d[4]=c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))||c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,95])),d[4]&&c.i64.eq(a[0],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSUpsertInboxThreadsRange"),c.i64.cast([0,1]),d[15],d[17],!0,d[16])},function(a){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.db.table(198).fetch(),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.resolve((e=[d[15],d[16],!0,d[17]],d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],e))},function(e){return d[4]?c.sequence([function(e){return c.storedProcedure(b("LSUpsertSyncGroupThreadsRange"),c.i64.cast([0,1]),a[0],d[15],d[17],!0,d[16])},function(b){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.filter(c.db.table(220).fetch(),function(b){return c.i64.eq(b.parentThreadKey,a[0])}),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[5]=a[0],d[6]=a[1],d[7]=a[2],d[8]=a[3],a}]):c.resolve((e=[d[0],d[1],d[2],d[3]],d[5]=e[0],d[6]=e[1],d[7]=e[2],d[8]=e[3],e))},function(a){return c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,1])).then(function(a){return a=a,d[9]=a[0],a})},function(e){return d[10]=new c.Map(),d[10].set("is_after",a[2]),d[10].set("parent_thread_key",a[0]),d[10].set("reference_thread_key",a[2]?a[4]:a[3]),d[10].set("reference_activity_timestamp",a[2]?a[5]:a[6]),d[10].set("additional_pages_to_fetch",a[7]),d[10].set("cursor",d[9]),d[10].set("messaging_tag",void 0),d[10].set("sync_group",c.i64.cast([0,1])),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[18]=c.i64.of_float(Date.now()),d[11]=c.i64.add(d[18],c.i64.cast([0,0]))):d[11]=c.i64.cast([0,0]),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"trq",c.i64.cast([0,145]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.db.table(10).fetch([[[a[0]]]]).next().then(function(b,e){e=b.done;b=b.value;return e?c.db.table(10).add({parentThreadKey:a[0],minThreadKey:d[6]==null?c.i64.cast([-2147483648,0]):d[6],minLastActivityTimestampMs:d[5]==null?c.i64.cast([0,1]):d[5],maxLastActivityTimestampMs:c.i64.cast([0,1]),maxThreadKey:c.i64.cast([-2147483648,0]),isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1}):(b.item,c.forEach(c.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1})}))})}]):c.resolve()},function(e){return a[1]&&c.i64.eq(a[6],c.i64.cast([0,0]))?c.storedProcedure(b("LSClearLoadingFlagsForThreadRange"),a[0],!1,c.i64.cast([0,95])):(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)||a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))&&!(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)&&a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))?c.sequence([function(e){return d[16]=a[3]==null?c.i64.cast([-2147483648,0]):a[3],d[15]=a[6]==null?c.i64.cast([0,1]):a[6],d[17]=c.i64.gt(d[15],c.i64.cast([0,1]))&&c.i64.gt(d[16],c.i64.cast([-2147483648,0])),d[4]=c.i64.eq(c.i64.cast([0,95]),c.i64.cast([0,1]))||c.i64.eq(c.i64.cast([0,95]),c.i64.cast([0,95])),d[4]&&c.i64.eq(a[0],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSUpsertInboxThreadsRange"),c.i64.cast([0,95]),d[15],d[17],!0,d[16])},function(a){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.db.table(198).fetch(),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.resolve((e=[d[15],d[16],!0,d[17]],d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],e))},function(e){return d[4]?c.sequence([function(e){return c.storedProcedure(b("LSUpsertSyncGroupThreadsRange"),c.i64.cast([0,95]),a[0],d[15],d[17],!0,d[16])},function(b){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.filter(c.db.table(220).fetch(),function(b){return c.i64.eq(b.parentThreadKey,a[0])}),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[5]=a[0],d[6]=a[1],d[7]=a[2],d[8]=a[3],a}]):c.resolve((e=[d[0],d[1],d[2],d[3]],d[5]=e[0],d[6]=e[1],d[7]=e[2],d[8]=e[3],e))},function(a){return c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,95])).then(function(a){return a=a,d[9]=a[0],a})},function(e){return d[10]=new c.Map(),d[10].set("is_after",a[2]),d[10].set("parent_thread_key",a[0]),d[10].set("reference_thread_key",a[2]?a[4]:a[3]),d[10].set("reference_activity_timestamp",a[2]?a[5]:a[6]),d[10].set("additional_pages_to_fetch",a[7]),d[10].set("cursor",d[9]),d[10].set("messaging_tag",void 0),d[10].set("sync_group",c.i64.cast([0,95])),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[18]=c.i64.of_float(Date.now()),d[11]=c.i64.add(d[18],c.i64.cast([0,0]))):d[11]=c.i64.cast([0,0]),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"trq",c.i64.cast([0,145]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.db.table(10).fetch([[[a[0]]]]).next().then(function(b,e){e=b.done;b=b.value;return e?c.db.table(10).add({parentThreadKey:a[0],minThreadKey:d[6]==null?c.i64.cast([-2147483648,0]):d[6],minLastActivityTimestampMs:d[5]==null?c.i64.cast([0,1]):d[5],maxLastActivityTimestampMs:c.i64.cast([0,1]),maxThreadKey:c.i64.cast([-2147483648,0]),isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1}):(b.item,c.forEach(c.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1})}))})}]):c.resolve()}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSThreadsRangesQueryStoredProcedure",["LSThreadsRangesQuery","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.parentThreadKey;d[1]=b.isLoadingBefore;d[2]=b.isLoadingAfter;d[3]=b.minThreadKey;d[4]=b.maxThreadKey;d[5]=b.maxLastActivityTimestampMs;d[6]=b.minLastActivityTimestampMs;d[7]=b.additionalPagesToFetch;d[8]=b.shouldSkipE2eeThreadsRanges;return c("LSThreadsRangesQuery").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MWInboxContextSwitcherGlimmer.react",["MDSGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={tabPlaceholder:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0}};function a(){return i.jsx("div",{className:"x78zum5 xu0aao5 x1swvt13 x1pi30zi x1y1aw1k xwib8y2 x3bhodz",children:i.jsx(c("MDSGlimmer.react"),{index:0,xstyle:j.tabPlaceholder})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxQuickPromotionWrapper.react",["CometErrorBoundary.react","CometPlaceholder.react","deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MAWUserVisibleErrorsNuxWrapper.react").__setRef("MWInboxQuickPromotionWrapper.react"));function a(a){var b=a.children;a=a.onError;return i.jsx(c("CometErrorBoundary.react"),{onError:a,children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(j,{children:b})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("loadLSThreadsForTheFirstTime",["I64","LSFactory","LSThreadsRangesQueryStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return c("LSThreadsRangesQueryStoredProcedure")(c("LSFactory")(a),{additionalPagesToFetch:(h||(h=d("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:h.max_int,maxThreadKey:h.max_int,minLastActivityTimestampMs:h.max_int,minThreadKey:h.max_int,parentThreadKey:b,shouldSkipE2eeThreadsRanges:!1})}g["default"]=a}),98);
__d("loadMoreLSThreads",["I64","LSFactory","LSThreadsRangesQueryStoredProcedure","Promise","ReQL","loadLSThreadsForTheFirstTime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e){return d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.threads_ranges_v2__generated).filter(function(a){return(i||(i=d("I64"))).equal(a.parentThreadKey,e)})).then(function(f){if(f!=null)if(!f.isLoadingBefore&&f.hasMoreBefore)return c("LSThreadsRangesQueryStoredProcedure")(c("LSFactory")(a),{additionalPagesToFetch:(i||(i=d("I64"))).zero,isLoadingAfter:!1,isLoadingBefore:!0,maxLastActivityTimestampMs:f.maxLastActivityTimestampMs,maxThreadKey:f.maxThreadKey,minLastActivityTimestampMs:f.minLastActivityTimestampMs,minThreadKey:f.minThreadKey,parentThreadKey:e,shouldSkipE2eeThreadsRanges:!1});else return(h||(h=b("Promise"))).resolve();else return c("loadLSThreadsForTheFirstTime")(a,e)})}g["default"]=a}),98);
__d("MWJewelThreadlistPreloader",["I64","LSDatabaseSingleton","asyncToGeneratorRuntime","loadMoreLSThreads","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){c("promiseDone")((h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("loadMoreLSThreads")(a,(i||(i=d("I64"))).of_int32(0))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":21")}))}g["default"]=a}),98);
__d("XCometGamingVideoControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/gaming/video/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("XFacebookHelpCenterContentControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/help/{cms_id}/{?cms_title}/",Object.freeze({region_hint:[],expand_folders:[]}),void 0);b=a;g["default"]=b}),98);