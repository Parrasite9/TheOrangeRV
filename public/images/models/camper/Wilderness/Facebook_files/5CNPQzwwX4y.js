;/*FB_PKG_DELIM*/

__d("CheckQueue",[],(function(a,b,c,d,e,f){var a=(b=window)!=null?b:self,g=a.setInterval,h=a.clearInterval,i=3e3,j=2,k=1e4;c=function(){function a(a,b){b===void 0&&(b={});this.$1=[];this.$2=a;this.$4=(a=b.checkInterval)!=null?a:i;this.$5=(a=b.checkIntervalChangeFactor)!=null?a:j;this.$6=(a=b.maxQueueLength)!=null?a:k}var b=a.prototype;b.start=function(){var a=this;if(this.$3!=null)return;this.$3=g(function(){var b=[],c=Date.now();for(var d=a.$1,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(c<g.lastCheckTimeStamp+g.timeDeltaFromRelease){b.push(g);continue}g.lastCheckTimeStamp=c;a.$2(g)===!1&&(g.timeDeltaFromRelease*=a.$5,b.push(g))}a.$1=b;a.$1.length===0&&(h(a.$3),a.$3=null)},this.$4)};b.enqueue=function(a){this.start(),this.$1.length<this.$6&&this.$1.push(a)};return a}();f.CheckQueue=c}),66);
__d("WeakRefApiUtils",[],(function(a,b,c,d,e,f){"use strict";var g,a=(g=window)!=null?g:self,h=a.WeakMap,i=u(),j=a.WeakSet,k=v(),l=a.WeakRef,m=w(),n=i&&k&&m,o=function(){function a(a){}var b=a.prototype;b.deref=function(){return void 0};return a}(),p=function(){function a(a){}var b=a.prototype;b.add=function(a){return this};b["delete"]=function(a){return!1};b.has=function(a){return!1};return a}(),q=function(){function a(a){}var b=a.prototype;b["delete"]=function(a){return!1};b.get=function(a){return void 0};b.has=function(a){return!1};b.set=function(a,b){return this};return a}();function b(){return i?h:null}function c(){return i&&h?h:q}function d(){return k?j:null}function e(){return k&&j?j:p}function r(){return m?l:null}function s(){return m&&l?l:o}function t(a){return typeof a.replace==="function"?a.replace(/\n/g," ").replace(/\s+/g," "):null}function u(){return h!=null&&typeof h.toString==="function"&&t(h.toString())==="function WeakMap() { [native code] }"}function v(){return j!=null&&typeof j.toString==="function"&&t(j.toString())==="function WeakSet() { [native code] }"}function w(){return l!=null&&typeof l.toString==="function"&&t(l.toString())==="function WeakRef() { [native code] }"}function x(){return n}f.WeakRefNoOp=o;f.WeakSetNoOp=p;f.WeakMapNoOp=q;f.getNativeWeakMap=b;f.getNativeWeakMapOrFallback=c;f.getNativeWeakSet=d;f.getNativeWeakSetOrFallback=e;f.getNativeWeakRef=r;f.getNativeWeakRefOrFallback=s;f.isWeakMapNative=u;f.isWeakSetNative=v;f.isWeakRefNative=w;f.isWeakAPINative=x}),66);
__d("LiveObjectMonitorTableClass",["ExecutionEnvironment","FBLogger","WeakRefApiUtils","clearInterval","performance","setInterval","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,a=(b=window)!=null?b:self,j=d("WeakRefApiUtils").getNativeWeakMapOrFallback(),k=d("WeakRefApiUtils").getNativeWeakRefOrFallback(),l=d("WeakRefApiUtils").isWeakAPINative();l||c("FBLogger")("comet_performance.memory").warn("Browser doesn't support weak reference API");e=function(){function b(){this.$4=2e4,this.isStarted=!1,this.shouldReport=!0,this.$1=new j(),this.$2=new Set(),this.$5=[],this.$3=this.$6()}var d=b.prototype;d.setScanIntervalMs=function(a){this.$4=a};d.getScanIntervalMs=function(){return this.$4};d.getSize=function(){return this.$2.size};d.getAllRefs=function(){return Array.from(this.$2)};d.$8=function(a){this.$2.forEach(function(b){a(b)})};d.$9=function(a){var b=null;this.$8(function(c){var d=c.deref();d===a&&(b=c)});return b};d.initStateData_DO_NOT_USE=function(a){var b=this.$10(),c=a.deref(),d=0;try{d=JSON.stringify(c||{}).length}catch(a){}return{ref:a,approxSize:d,lastScaned:b}};d.$11=function(){return new Error("no error").stack};d.$6=function(){if((h||(h=c("ExecutionEnvironment"))).canUseDOM&&a.FinalizationRegistry!=null)return new a.FinalizationRegistry(b.$7)};d.$10=function(){if((h||(h=c("ExecutionEnvironment"))).canUseDOM||(i||(i=c("performance"))).now!=null)return(i||(i=c("performance"))).now();c("FBLogger")("comet_performance.memory").warn("Need to be able to call performance.now()");return 0};d.getMonitorMetaData=function(a){a=a.deref();return a==null?void 0:this.$1.get(a)};d.setMonitorMetaData=function(a,b){a=a.deref();a!=null&&this.$1.set(a,b)};d.deleteMonitorMetaData=function(a){a=a.deref();a!=null&&this.$1["delete"](a)};d.updateRefData_DO_NOT_USE=function(a){var b=this.initStateData_DO_NOT_USE(a),c=this.getMonitorMetaData(a);if(c&&b){c.state;c=babelHelpers.objectWithoutPropertiesLoose(c,["state"]);this.setMonitorMetaData(a,babelHelpers["extends"]({},c,{state:b}))}};d.fullScan_DO_NOT_USE=function(){var a=this;this.$8(function(b){a.updateRefData_DO_NOT_USE(b)});this.afterPeoridicChecking_DO_NOT_USE()};d.afterPeoridicChecking_DO_NOT_USE=function(){};d.getRefSet=function(){return this.$2};d.$12=function(){(h||(h=c("ExecutionEnvironment"))).canUseDOM&&a.gc!=null&&a.gc()};d.start=function(){var a=this;if(!l)return!1;this.isStarted=!0;var b=c("setInterval")(function(){a.$12(),a.fullScan_DO_NOT_USE(),a.shouldReport&&a.report()},this.$4);this.$5=[b];return!0};d.stop=function(){this.$5.map(function(a){return c("clearInterval")(a)}),this.$5=[],this.$1=new j(),this.$2=new Set(),this.isStarted=!1,this.$3=this.$6()};d.add=function(a){if(!l)return a;this.isStarted||this.start();if(a==null)throw c("FBLogger")("comet_performance.memory").info("You passed a null into LiveObjectMonitorTable.add()");if(typeof a!=="object")throw c("FBLogger")("comet_performance.memory").info("Can only pass objects for now");var b=new k(a),d={id:""+c("uuidv4")(),stack:this.$11(),creationTime:this.$10(),state:this.initStateData_DO_NOT_USE(b)};this.trackObject_DO_NOT_USE(a,b,d);return a};d.trackObject_DO_NOT_USE=function(a,b,c){this.$2.add(b);this.setMonitorMetaData(b,c);(c=this.$3)==null?void 0:c.register(a,{set:this.$2,ref:b},b)};d.inspectObj=function(a){if(a==null)throw c("FBLogger")("comet_performance.memory").info("You passed a null into LiveObjectMonitorTable.inspectObj()");if(typeof a!=="object")throw c("FBLogger")("comet_performance.memory").info("Can only pass objects for now");a=this.$9(a);if(a){this.updateRefData_DO_NOT_USE(a);return this.getMonitorMetaData(a)}return void 0};d.inspectRef=function(a){this.updateRefData_DO_NOT_USE(a);return this.getMonitorMetaData(a)};d.removeDataForWeakRef=function(a){this.deleteMonitorMetaData(a),this.$2["delete"](a)};d.refByID=function(a){var b=this,c;this.$8(function(d){var e=b.getMonitorMetaData(d);e&&e.id===a&&(c=d)});return c};d.report=function(){var a=this;if(!this.shouldReport)return[];var b=this.$10(),c=[];this.$8(function(d){d=a.inspectRef(d);d&&c.push({id:d.id,age:b-d.creationTime,size:d.state.approxSize,stackTrace:d.stack})});c.length>0&&c.sort(function(a,b){return b.age-a.age});return c};d.stackForRef=function(a){a=this.getMonitorMetaData(a);if(a!=null){a=a==null?void 0:a.stack;if(a!=null)return a}return null};return b}();e.$7=function(a){var b=a.set;a=a.ref;b["delete"](a)};g["default"]=e}),98);
__d("MemMinderConfig",["justknobx"],(function(a,b,c,d,e,f,g){a=function(){function a(){var a;this.gcInterval=(a=c("justknobx"))._("1525");this.dataLogAgeLowerBound=a._("670")*6e4;this.dataLogAgeUpperBound=a._("781")*6e4;this.logDecayFactor=a._("1575")/100;this.releasedObjectCheckInterval=a._("1822");this.objectScanInterval=a._("1823");this.objectScanQueueMaxLength=a._("1824");this.objectReleaseCheckInterval=a._("1825");this.objectReleaseCheckQueueMaxLength=a._("1826");this.objectReleaseCheckIntervalChangeFactor=a._("905")/100;this.$1=!1}var b=a.prototype;b.debugLogOn=function(){this.$1=!0};b.debugLogOff=function(){this.$1=!1};b.debugLogIsOn=function(){return this.$1};return a}();b=new a();g["default"]=b}),98);
__d("MemMinderUtils",["MemMinderConfig"],(function(a,b,c,d,e,f,g){var h=console;a=function(){function a(){}var b=a.prototype;b.debugConsoleLog=function(){c("MemMinderConfig").debugLogIsOn()&&h.log.apply(h,arguments)};b.decayProbability=function(a,b){b===void 0&&(b=c("MemMinderConfig").logDecayFactor);return Math.exp(-b*a)};return a}();b=new a();g["default"]=b}),98);
__d("MemMinderLogger",["CurrentUser","MemMinderConfig","MemMinderUtils","Random","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){var h=c("requireDeferred")("LogWebMemoryProxyMetricsFalcoEvent").__setRef("MemMinderLogger"),i=c("gkx")("21033"),j=c("CurrentUser").getAppID();a=function(){function a(){this.$1=new Map()}var b=a.prototype;b.$2=function(a){if(!i)return!1;if(a.ageSinceRelease<c("MemMinderConfig").dataLogAgeLowerBound||a.ageSinceRelease>c("MemMinderConfig").dataLogAgeUpperBound)return!1;var b=a.useCaseId;a=Math.floor(a.ageSinceRelease/(60*1e3));b=b+":"+a;a=(a=this.$1.get(b))!=null?a:0;if(c("Random").random()>c("MemMinderUtils").decayProbability(a))return!1;else this.$1.set(b,++a);return!0};b.log=function(a){if(!this.$2(a))return;h.onReady(function(b){b.log(function(){var b={app_id:j,use_case_id:a.useCaseId,objects_retained:String(a.numberOfObjectsRetained),age_since_release:String(a.ageSinceRelease)};c("MemMinderUtils").debugConsoleLog("Logging to Falco: ",b);return b})})};return a}();b=new a();g["default"]=b}),98);
__d("MemMinderClass",["CheckQueue","FBLogger","LiveObjectMonitorTableClass","MemMinderConfig","MemMinderLogger","MemMinderUtils","WeakRefApiUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=(b=d("WeakRefApiUtils")).isWeakAPINative(),i=c("FBLogger")("MemMinder"),j=0,k=100,l=b.getNativeWeakRefOrFallback(),m=b.getNativeWeakSetOrFallback(),n=b.getNativeWeakMapOrFallback(),a=(e=window)!=null?e:self;a.setTimeout;var o=a.setInterval,p={},q=void 0,r={},s=function(){return!1},t=function(){return 0},u={isOversize:s,proxySize:t};f=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.$MemMinderClass$p_1=new Map();b.$MemMinderClass$p_2=new n();b.$MemMinderClass$p_3=new m();b.$MemMinderClass$p_4=new n();b.$MemMinderClass$p_5=new(d("CheckQueue").CheckQueue)(function(a){switch(a.type){case"SINGLE":return b.$MemMinderClass$p_6(a.id,a);case"SET":return b.$MemMinderClass$p_7(a.idSet,a);default:return!0}},{checkInterval:c("MemMinderConfig").objectReleaseCheckInterval,checkIntervalChangeFactor:c("MemMinderConfig").objectReleaseCheckIntervalChangeFactor,maxQueueLength:c("MemMinderConfig").objectReleaseCheckQueueMaxLength});b.setScanIntervalMs(c("MemMinderConfig").objectScanInterval);b.shouldReport=!1;return b}var e=b.prototype;e.$MemMinderClass$p_8=function(a){return r[a]};e.start=function(){var b=this;if(this.isStarted)return!0;var d=a.prototype.start.call(this);if(d===!1)return!1;o(function(){b.$MemMinderClass$p_9()},c("MemMinderConfig").gcInterval);return!0};e.$MemMinderClass$p_9=function(){var a=this.$MemMinderClass$p_1;for(var b=a.entries(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e[0];e=e[1];e.deref()===void 0&&a["delete"](f)}};e.track=function(a,b,d){d===void 0&&(d=u);if(!h||b==null)return q;if(typeof b!=="object"&&typeof b!=="function")return q;if(this.getSize()>=c("MemMinderConfig").objectScanQueueMaxLength)return q;if(this.$MemMinderClass$p_3.has(b))return this.$MemMinderClass$p_4.get(b);this.isStarted||this.start();this.$MemMinderClass$p_8(a);d=babelHelpers["extends"]({isOversize:s,proxySize:t},d);var e=new l(b);a={useCaseId:a,nextScanTimeStamp:Date.now()+((a=d.monitorIntervalMs)!=null?a:c("MemMinderConfig").objectScanInterval),userData:d};d=this.$MemMinderClass$p_10(e,d);if(d==null)return q;var f=""+j++;d={id:""+f,stack:"",creationTime:Date.now(),state:d,additionalMetaData:a};this.trackObject_DO_NOT_USE(b,e,d);this.$MemMinderClass$p_3.add(b);this.$MemMinderClass$p_4.set(b,f);this.$MemMinderClass$p_1.set(f,e);return f};e.monitor=function(a,b,c){c===void 0&&(c=u);this.track(a,b,c);return b};e.expectObjectsToRelease=function(a){if(a.size===0)return;var b=Date.now();for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=a.length)break;g=a[e++]}else{e=a.next();if(e.done)break;g=e.value}g=g;var h=g[0];g=g[1];if(g.size===0)continue;c("MemMinderUtils").debugConsoleLog("["+((f=h)!=null?f:"")+"] expecting "+g.size+" objects to release");this.$MemMinderClass$p_5.enqueue({useCaseId:h,idSet:g,type:"SET",releaseTimeStamp:b,lastCheckTimeStamp:b,timeDeltaFromRelease:c("MemMinderConfig").releasedObjectCheckInterval})}};e.expectObjectToRelease=function(a,b){var d;c("MemMinderUtils").debugConsoleLog("["+((d=a)!=null?d:"")+"] expecting object with id "+b+" to release");d=Date.now();this.$MemMinderClass$p_5.enqueue({type:"SINGLE",useCaseId:a,id:b,releaseTimeStamp:d,lastCheckTimeStamp:d,timeDeltaFromRelease:c("MemMinderConfig").releasedObjectCheckInterval})};e.$MemMinderClass$p_11=function(a){a=Date.now()-a.releaseTimeStamp;return a>c("MemMinderConfig").dataLogAgeUpperBound};e.$MemMinderClass$p_6=function(a,b){c("MemMinderUtils").debugConsoleLog("check object with id "+a+" release");if(!this.$MemMinderClass$p_1.has(a))return!0;var d=this.$MemMinderClass$p_1.get(a);if(d==null){this.$MemMinderClass$p_1["delete"](a);return!0}if(this.$MemMinderClass$p_11(b)||d.deref()==null){this.removeDataForWeakRef(d);return!0}c("MemMinderUtils").debugConsoleLog("object with id "+a+" is still retained");return!1};e.$MemMinderClass$p_7=function(a,b){if(a.size===0)return!0;var d=b.useCaseId;c("MemMinderUtils").debugConsoleLog("["+d+"] expecting "+a.size+" objects to release");var e=a.size,f=Array.from(a);for(var g=0;g<f.length;g++){var h=f[g];this.$MemMinderClass$p_6(h,b)===!0&&a["delete"](h)}c("MemMinderLogger").log({useCaseId:d,numberOfObjectsRetained:a.size,ageSinceRelease:Date.now()-b.releaseTimeStamp});a.size>0?c("MemMinderUtils").debugConsoleLog("["+d+"] "+a.size+" objects are still retained"):c("MemMinderUtils").debugConsoleLog("["+d+"] "+e+" successfully released");return a.size===0};e.removeDataForWeakRef=function(b){var c;c=(c=this.getMonitorMetaData(b))==null?void 0:c.id;c!=null&&this.$MemMinderClass$p_1["delete"](c);c=b.deref();c!=null&&(this.$MemMinderClass$p_4["delete"](c),this.$MemMinderClass$p_3["delete"](c));a.prototype.removeDataForWeakRef.call(this,b)};e.updateRefData_DO_NOT_USE=function(a){if(a.deref()==null){this.removeDataForWeakRef(a);return}var b=this.getMonitorMetaData(a);if(b==null){this.removeDataForWeakRef(a);return}var d=b.additionalMetaData;if(d==null){this.removeDataForWeakRef(a);return}if(d.nextScanTimeStamp>Date.now())return;var e=this.$MemMinderClass$p_12(a,d.userData);if(e==null){this.removeDataForWeakRef(a);return}b.state.approxSize=e.approxSize;b.state.lastScaned=e.lastScaned;d.nextScanTimeStamp=Date.now()+((a=d.userData.monitorIntervalMs)!=null?a:c("MemMinderConfig").objectScanInterval)};e.afterPeoridicChecking_DO_NOT_USE=function(){var a=this.getRefSet().size;c("MemMinderUtils").debugConsoleLog("number of objects being monitored: %s",a)};e.$MemMinderClass$p_10=function(a,b){b=this.$MemMinderClass$p_12(a,b);return b==null?null:babelHelpers["extends"]({ref:a},b)};e.$MemMinderClass$p_12=function(a,b){var c=a.deref();if(c==null)return null;var d=Date.now();if(b.proxySize===t&&b.isOversize===s)return{approxSize:0,lastScaned:d};var e=this.guardCall(function(){return b.proxySize(c)},a);if(typeof e!=="number")return null;a=this.guardCall(function(){return b.isOversize(e)},a);a===!0;return{approxSize:e,lastScaned:d}};e.guardCall=function(a,b){var c=0,d=0,e;try{c=Date.now(),e=a(),d=Date.now()}catch(a){i.warn("callback fail to execute");this.removeDataForWeakRef(b);return p}d-c>k&&i.warn("Invoking the callback took "+(d-c)+"ms,"+("which is longer than "+k+"ms.")+" Please optimize your callback function.");return e};return b}(c("LiveObjectMonitorTableClass"));g["default"]=f}),98);
__d("MemMinder",["MemMinderClass","WeakRefApiUtils"],(function(a,b,c,d,e,f,g){"use strict";a=d("WeakRefApiUtils").isWeakAPINative()?new(c("MemMinderClass"))():null;b=a;g["default"]=b}),98);
__d("useMemMinder",["MemMinder","react"],(function(a,b,c,d,e,f,g){"use strict";var h;d=h||d("react");var i=d.useCallback,j=d.useEffect,k=d.useLayoutEffect,l=d.useMemo,m=d.useRef,n=d.useState;function o(a,b){var d=m(null);d.current==null&&(d.current=new Map());var e=c("MemMinder")==null?void 0:c("MemMinder").track(a,b);if(e!=null){var f;if(((f=d.current)==null?void 0:f.has(a))===!1){(f=d.current)==null?void 0:f.set(a,new Set([e]))}(f=d.current)==null?void 0:(f=f.get(a))==null?void 0:f.add(e)}j(function(){return function(){if(d.current!=null){var a;c("MemMinder")==null?void 0:c("MemMinder").expectObjectsToRelease(d.current);(a=d.current)==null?void 0:a.clear();d.current=null}}},[]);return b}function a(a,b){var d=m(null),e=c("MemMinder")==null?void 0:c("MemMinder").track(a,b);e!=null&&(d.current=new p(a,e));j(function(){return function(){if(d.current!=null){var a=d.current;c("MemMinder")==null?void 0:c("MemMinder").expectObjectToRelease(a.useCaseId,a.objectId);d.current=null}}});return b}var p=function(a,b){this.useCaseId=a,this.objectId=b};function b(a){var b=m(null);if(b.current==null&&c("MemMinder")){var d=new p(a,"");d.objectId=(a=c("MemMinder").track(a,d))!=null?a:"";b.current=d}j(function(){return function(){b.current!=null&&(c("MemMinder")==null?void 0:c("MemMinder").expectObjectToRelease(b.current.useCaseId,b.current.objectId),b.current=null)}},[])}function e(a,b){b===void 0&&(b="USE_STATE");a=n(a);var c=a[0],d=a[1];c=typeof c==="object"?c:null;o(b,c);o(b,d);return a}function f(a,b,c){c===void 0&&(c="USE_EFFECT"),o(c,a),o(c,b),j(a,b)}function q(a,b,c){c===void 0&&(c="USE_LAYOUT_EFFECT"),o(c,a),o(c,b),k(a,b)}function r(a,b,c){c===void 0&&(c="USE_CALLBACK");o(c,a);o(c,b);return i(a,b)}function s(a,b,c){c===void 0&&(c="USE_MEMO");o(c,a);o(c,b);a=l(a,b);o(c,typeof a==="object"?a:null);return a}g.useMemMinder=o;g.useTrackReactElement=a;g.useComponentReleaseCheckAfterUnmount=b;g.useState=e;g.useEffect=f;g.useLayoutEffect=q;g.useCallback=r;g.useMemo=s}),98);